$schema: 'https://moonrepo.dev/schemas/project.json'
language: 'rust'
layer: 'library'

tasks:
  format:
    command: 'cargo'
    args: ['fmt']

  lint:
    command: 'cargo'
    args: ['clippy']

  fix:
    command: 'cargo'
    args: ['clippy', "--fix"]

  test:
    command: 'cargo'
    args: ['test']

  typecheck:
    command: 'cargo'
    args: ['check']

  docs:
    command: 'cargo'
    args: ['rustdoc']

  build:
    command: 'cargo'
    args: ['build', '--release', '--target', 'wasm32-unknown-unknown']
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'
    outputs:
      - 'target/wasm32-unknown-unknown/release/*.wasm'
